(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"0125":function(e,t,s){},1037:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("result",{attrs:{isSuccess:!0,content:!1,title:e.email,description:e.description}},[s("template",{slot:"action"},[s("a-button",{attrs:{size:"large",type:"primary"}},[e._v(e._s(e.$t("register_succ.btn1")))]),s("a-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"large"},on:{click:e.goHomeHandle}},[e._v(e._s(e.$t("register_succ.btn2")))])],1)],2)},a=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"result"},[s("div",[s("a-icon",{class:{icon:!0,success:e.isSuccess,error:!e.isSuccess},attrs:{type:e.isSuccess?"check-circle":"close-circle"}})],1),e.title?s("div",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),e.description?s("div",{staticClass:"description"},[e._v(e._s(e.description))]):e._e(),e.content?s("div",{staticClass:"content"},[e._t("default")],2):e._e(),s("div",{staticClass:"action"},[e._t("action")],2)])},n=[],o={name:"Result",props:{isSuccess:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},content:{type:Boolean,default:!1}}},l=o,c=(s("4a50"),s("2877")),u=Object(c["a"])(l,i,n,!1,null,"2a79c432",null),d=u.exports,p={name:"RegisterResult",components:{Result:d},data:function(){return{description:this.$t("register_succ.tips1"),form:{}}},computed:{email:function(){var e=this.form&&this.form.email||"xxx",t="".concat(this.$t("register_succ.tips2"),"：").concat(e," ").concat(this.$t("register_succ.tips3"));return t}},created:function(){this.form=this.$route.params},methods:{goHomeHandle:function(){this.$router.push({name:"index"})}}},g=p,m=Object(c["a"])(g,r,a,!1,null,"249e54ff",null);t["default"]=m.exports},1348:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg"},[r("img",{attrs:{src:s("d68e"),alt:"backgroung"}}),r("div",{staticClass:"login"},[r("a-card",{staticClass:"loginInfo"},[r("div",{staticClass:"title"},[r("span",[e._v(e._s(e.$t("register.title1")))]),r("change-lang",{staticClass:"action"})],1),r("a-form",{staticClass:"Loginform",attrs:{form:e.form}},[r("a-form-item",e._b({staticClass:"input",attrs:{label:this.$t("register.user_id")}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userId",{rules:[{required:!0,message:this.$t("register.user_id"),validator:function(t,s,r){return/^\s*\w{1,20}\s*$/.test(s)?r():r(e.$t("user.user_id_placeholder1"))}}]}],expression:"[\n              'userId',\n              {rules: [{ required: true, message: this.$t('register.user_id'),validator: (rule, value, callback)=>/^\\s*\\w{1,20}\\s*$/.test(value)?callback():callback($t('user.user_id_placeholder1')) }]}\n            ]"}],staticClass:"aInput",attrs:{size:"large",type:"userName",placeholder:e.$t("register.user_id")}})],1),r("a-form-item",e._b({staticClass:"input",attrs:{label:this.$t("register.email")}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,type:"email",message:this.$t("register.tips1")}],validateTrigger:["change","blur"]}],expression:"[\n              'email',\n              {rules: [{ required: true, type: 'email', message: this.$t('register.tips1') }], validateTrigger: ['change', 'blur']}\n            ]"}],staticClass:"aInput",attrs:{size:"large",placeholder:e.$t("register.email")}})],1),r("a-popover",{attrs:{placement:"rightTop",trigger:"click",visible:e.state.passwordLevelChecked}},[r("template",{slot:"content"},[r("div",{style:{width:"240px"}},[r("div",{class:["user-register",e.passwordLevelClass]},[e._v(e._s(e.$t("register.strength"))+"："),r("span",[e._v(e._s(e.passwordLevelName))])]),r("a-progress",{attrs:{percent:e.state.percent,showInfo:!1,strokeColor:e.passwordLevelColor}}),r("div",{staticStyle:{"margin-top":"10px"}},[r("span",[e._v(e._s(e.$t("register.tips2")))])])],1)]),r("a-form-item",e._b({staticClass:"input",attrs:{label:this.$t("register.user_pwd1")}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userPwd",{rules:[{required:!0,message:e.$t("register.user_pwd1_msg1"),validator:this.handlePasswordLevel}],validateTrigger:["change","blur"]}],expression:"[\n                'userPwd',\n                {rules: [{ required: true, message: $t('register.user_pwd1_msg1') ,validator: this.handlePasswordLevel }], validateTrigger: ['change', 'blur']}\n              ]"}],staticClass:"aInput",attrs:{size:"large",type:"password",placeholder:e.$t("register.user_pwd1")},on:{click:e.handlePasswordInputClick},model:{value:e.data.userPwd,callback:function(t){e.$set(e.data,"userPwd",t)},expression:"data.userPwd"}})],1)],2),r("a-form-item",e._b({staticClass:"input",attrs:{label:this.$t("register.placeholder3")}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userPwd1",{rules:[{required:!0,message:e.$t("register.msg3"),validator:function(t,s,r){return e.data.userPwd===s?r():r(e.$t("user.user_pwd2_msg1"))}}]}],expression:"[\n              'userPwd1',\n              {rules: [{ required: true, message: $t('register.msg3'),validator: (rule, value, callback)=>data.userPwd===value?callback():callback($t('user.user_pwd2_msg1')) }] }\n            ]"}],staticClass:"aInput",attrs:{size:"large",type:"password",placeholder:e.$t("register.placeholder3")}})],1),r("a-form-item",e._b({staticClass:"input",attrs:{label:this.$t("register.mobile")}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,message:this.$t("register.tips6"),pattern:/^\s*1[3456789]\d{9}\S*$/},{validator:this.handlePhoneCheck}],validateTrigger:["change","blur"]}],expression:"[\n              'mobile',\n              {rules: [{ required: true, message: this.$t('register.tips6'), pattern: /^\\s*1[3456789]\\d{9}\\S*$/ }, { validator: this.handlePhoneCheck } ], validateTrigger: ['change', 'blur'] }\n            ]"}],staticClass:"aInput",attrs:{size:"large",placeholder:e.$t("register.mobile")},model:{value:e.data.mobile,callback:function(t){e.$set(e.data,"mobile",t)},expression:"data.mobile"}})],1),r("a-form-item",e._b({staticClass:"input",attrs:{label:this.$t("register.placeholder7")}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["verifyCode",{rules:[{required:!0,message:this.$t("register.tips5"),pattern:/^\s*\d{4,}\s*$/}],validateTrigger:["change","blur"]}],expression:"[\n              'verifyCode',\n              {rules: [{ required: true, message: this.$t('register.tips5'), pattern: /^\\s*\\d{4,}\\s*$/ } ], validateTrigger: ['change', 'blur'] }\n            ]"}],staticClass:"aInput",staticStyle:{width:"50%"},attrs:{size:"large",type:"text",autocomplete:"off",placeholder:this.$t("register.placeholder7")}}),r("a-button",{class:e.btnClass,on:{click:e.sendCheck}},[e._v(e._s(e.change?e.$t("register.msg8"):e.secondTip))])],1),r("a-form-item",{staticStyle:{"padding-top":"20px"}},[r("a-button",{staticClass:"submitBtn",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.registerBtn,disabled:e.registerBtn},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[e._v(e._s(e.$t("register.btn2"))+"\n          ")])],1)],1),r("div",{staticClass:"footer"},[r("span",[e._v(e._s(e.$t("register.btn3"))+"\n          "),r("router-link",{attrs:{to:{name:"index"}}},[e._v(e._s(e.$t("register.btn4")))])],1)])],1)],1)])},a=[],i=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("ac0d"),o=s("7d92"),l=s.n(o),c=s("c91b"),u=s("b775");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach(function(t){Object(i["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var g={0:"error",1:"error",2:"warning",3:"success"},m={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"},h={name:"Register",components:{ChangeLang:c["a"]},mixins:[n["b"]],data:function(){return{form:this.$form.createForm(this),levelNames:{0:this.$t("register.strength0"),1:this.$t("register.strength1"),2:this.$t("register.strength2"),3:this.$t("register.strength3")},formItemLayout:{labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:14},sm:{span:14}}},change:!0,btnClass:"sendBtn",timer:"",secondTip:"60S",state:{time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"},registerBtn:!1,data:{sysUser:{},sysOrg:{}}}},computed:{passwordLevelClass:function(){return g[this.state.passwordLevel]},passwordLevelName:function(){return this.levelNames[this.state.passwordLevel]},passwordLevelColor:function(){return m[this.state.passwordLevel]}},methods:{handlePasswordLevel:function(e,t,s){var r=0;/[0-9]/.test(t)&&r++,/[a-zA-Z]/.test(t)&&r++,/[^0-9a-zA-Z_]/.test(t)&&r++,this.state.passwordLevel=r,this.state.percent=30*r,r>=2?(r>=3&&(this.state.percent=100),s()):(0===r&&(this.state.percent=10),s(new Error(this.$t("register.msg1"))))},handlePasswordCheck:function(e,t,s){var r=this.form.getFieldValue("userPwd");void 0===t&&s(new Error(this.$t("register.msg2"))),t&&r&&t.trim()!==r.trim()&&s(new Error(this.$t("register.msg3"))),s()},handlePhoneCheck:function(e,t,s){s()},handlePasswordInputClick:function(){this.isMobile()?this.state.passwordLevelChecked=!1:this.state.passwordLevelChecked=!0},handleSubmit:function(){var e=this;this.form.validateFields(function(t,s){t||(e.data.sysUser=Object.assign(e.data.sysUser,s),e.data.sysUser.userPwd=l.a.sha256().update(s.userPwd).digest("hex"),delete e.data.sysUser.userPwd1,e.data.sysOrg.orgName=e.data.sysUser.mobile,e.data.sysOrg.orgType="05",e.data.sysOrg.zoneCode="",e.data.sysOrg.timezone="",e.data.sysOrg.monetaryyUnit="",e.data.sysOrg.equiNum=100,e.data.sysOrg.userNum=100,e.data.sysOrg.remark="",console.log(e.data),Object(u["b"])({url:"/auth/register",method:"post",params:{jsonStr:JSON.stringify(e.data),userId:e.data.sysUser.mobile}}).then(function(t){t&&e.$router.push({name:"registerResult",params:p({},s)})}))})},requestFailed:function(e){this.$notification["error"]({message:this.$t("register.msg5"),description:((e.response||{}).data||{}).message||this.$t("register.msg7"),duration:4}),this.registerBtn=!1},sendCheck:function(){var e=this;if(this.data.mobile){if(this.change){this.change=!1,this.btnClass="disabled";var t=60,s=setInterval(function(){e.secondTip=--t+"S"},1e3);this.timer=setTimeout(function(){clearInterval(s),e.btnClass="sendBtn",e.change=!0},6e4),Object(u["b"])({url:"/auth/send-sms",method:"post",params:{phoneNum:this.data.mobile}}).then(function(e){e&&console.log(e)})}}else this.$message.info(this.$t("register.tips6"))}},watch:{"state.passwordLevel":function(e){console.log(e)}}},f=h,v=(s("790f"),s("2877")),b=Object(v["a"])(f,r,a,!1,null,"ac5b5748",null);t["default"]=b.exports},"2c3f":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},a=[],i=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("2f62"),o=s("ca00"),l=s("0692");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach(function(t){Object(i["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var d={data:function(){return{token:""}},created:function(){var e=this;Object(l["b"])(e,e.$route.query.locale);var t={token:e.$route.query.token};e.Login(t).then(function(){e.loginSuccess()}).catch(function(){e.Logout({}).then(function(){})})},methods:u({},Object(n["b"])(["Login","Logout"]),{loginSuccess:function(){this.$router.push({name:"dashboard"}),this.$notification.success({message:this.$t("login.msg4"),description:"".concat(Object(o["b"])(this),"，").concat(this.$t("login.msg5"))})}})},p=d,g=s("2877"),m=Object(g["a"])(p,r,a,!1,null,null,null);t["default"]=m.exports},"4a50":function(e,t,s){"use strict";var r=s("0125"),a=s.n(r);a.a},"790f":function(e,t,s){"use strict";var r=s("c9a3"),a=s.n(r);a.a},c9a3:function(e,t,s){},d68e:function(e,t,s){e.exports=s.p+"img/bg.4e050105.png"}}]);
//# sourceMappingURL=user.642d5eea.js.map